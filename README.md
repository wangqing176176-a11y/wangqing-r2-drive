# Qing R2 Cloudy (WanQing's R2 Drive)

!License
!Next.js
!Cloudflare

## ğŸ“– ç®€ä»‹ (Introduction)

**Qing R2 Cloudy** æ˜¯ä¸€ä¸ªåŸºäº **Next.js 15** å’Œ **Cloudflare R2** æ„å»ºçš„ç°ä»£åŒ–ä¸ªäººè½»é‡çº§äº‘ç›˜ç³»ç»Ÿã€‚

å®ƒåˆ©ç”¨ Cloudflare å¼ºå¤§çš„å…¨çƒè¾¹ç¼˜ç½‘ç»œï¼Œæä¾›æé€Ÿçš„æ–‡ä»¶ä¸Šä¼ ä¸ä¸‹è½½ä½“éªŒã€‚é¡¹ç›®å®Œå…¨ Serverless åŒ–ï¼Œæ— éœ€è´­ä¹°ä¼ ç»ŸæœåŠ¡å™¨ï¼Œéƒ¨ç½²ç®€å•ï¼Œæˆæœ¬æä½ï¼ˆç”šè‡³å…è´¹ï¼‰ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§ (Features)

*   **ğŸ“‚ æ–‡ä»¶ç®¡ç†**ï¼šæ”¯æŒæ–‡ä»¶å¤¹å±‚çº§æµè§ˆï¼Œæ¸…æ™°çš„é¢åŒ…å±‘å¯¼èˆªã€‚
*   **ğŸš€ æé€Ÿä¸Šä¼ **ï¼š
    *   æ”¯æŒ**å…¨å±æ‹–æ‹½ä¸Šä¼ **ã€‚
    *   ä½¿ç”¨ **R2 é¢„ç­¾å URL (Presigned URL)** æŠ€æœ¯ï¼Œç»•è¿‡ Cloudflare Pages çš„ 100MB è¯·æ±‚ä½“é™åˆ¶ï¼Œæ”¯æŒæœ€å¤§ **5GB** å•æ–‡ä»¶ä¸Šä¼ ã€‚
    *   **å®æ—¶åé¦ˆ**ï¼šæ˜¾ç¤ºç²¾ç¡®çš„ä¸Šä¼ ç™¾åˆ†æ¯”å’Œç½‘ç»œé€Ÿåº¦ã€‚
    *   **é˜Ÿåˆ—ç®¡ç†**ï¼šæ”¯æŒå¤šæ–‡ä»¶é˜Ÿåˆ—ï¼Œè‡ªåŠ¨å¹¶å‘æ§åˆ¶ï¼Œæ”¯æŒæš‚åœã€æ¢å¤å’Œå–æ¶ˆã€‚
*   **ğŸ‘€ åœ¨çº¿é¢„è§ˆ**ï¼š
    *   **å›¾ç‰‡**ï¼šæ”¯æŒ JPG, PNG, GIF, WEBP, SVG ç­‰ä¸»æµæ ¼å¼ã€‚
    *   **è§†é¢‘**ï¼šæ”¯æŒ MP4, MOV, MKV ç­‰æ ¼å¼ï¼ŒåŸç”Ÿæ’­æ”¾å™¨ä½“éªŒï¼Œè‡ªé€‚åº” 16:9 æ¯”ä¾‹ã€‚
    *   **éŸ³é¢‘**ï¼šæ”¯æŒ MP3, WAV, OGG, FLAC ç­‰æ ¼å¼ï¼Œå¸¦å°é¢é¢„è§ˆã€‚
    *   **æ–‡æ¡£**ï¼šæ”¯æŒ PDF åœ¨çº¿é¢„è§ˆï¼Œä»¥åŠ Word, Excel, PPT (é€šè¿‡å¾®è½¯åœ¨çº¿æœåŠ¡é¢„è§ˆ)ã€‚
    *   **ä»£ç **ï¼šæ”¯æŒå¸¸è§ä»£ç æ–‡ä»¶ï¼ˆJS, PY, JAVA, HTML ç­‰ï¼‰çš„å›¾æ ‡è¯†åˆ«ã€‚
*   **ğŸ” æœç´¢ä¸æ’åº**ï¼šæ”¯æŒæŒ‰æ–‡ä»¶åå®æ—¶æœç´¢ï¼›æ”¯æŒæŒ‰ä¸Šä¼ æ—¶é—´ã€æ–‡ä»¶å¤§å°ã€åç§°è¿›è¡Œå‡åº/é™åºæ’åˆ—ã€‚
*   **ğŸ” å®‰å…¨æœºåˆ¶**ï¼š
    *   å‰ç«¯ç®¡ç†å‘˜ç™»å½•éªŒè¯ï¼ˆé˜²æ­¢æœªæˆæƒç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚
    *   ä¸Šä¼ æ¥å£ç­¾åéªŒè¯ï¼Œç¡®ä¿åªæœ‰é€šè¿‡éªŒè¯çš„è¯·æ±‚æ‰èƒ½å†™å…¥å­˜å‚¨æ¡¶ã€‚
*   **ğŸ¨ ç°ä»£åŒ– UI**ï¼š
    *   åŸºäº **Tailwind CSS 4** æ„å»ºï¼Œç•Œé¢ç®€æ´ç¾è§‚ã€‚
    *   å®Œç¾æ”¯æŒ **æ·±è‰²æ¨¡å¼ (Dark Mode)**ï¼Œè‡ªåŠ¨è·Ÿéšç³»ç»Ÿã€‚
    *   å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ã€‚

## ğŸŒŸ é¡¹ç›®ä¼˜åŠ¿ (Advantages)

1.  **Serverless æ¶æ„**ï¼šå®Œå…¨éƒ¨ç½²åœ¨ Cloudflare Pages ä¸Šï¼Œæ— éœ€ç»´æŠ¤æœåŠ¡å™¨ï¼Œè¿ç»´æˆæœ¬ä¸ºé›¶ã€‚
2.  **è¶…ä½æˆæœ¬**ï¼šCloudflare R2 å­˜å‚¨æ‹¥æœ‰æ…·æ…¨çš„å…è´¹é¢åº¦ï¼ˆ10GB å­˜å‚¨ï¼Œæµ·é‡ A/B ç±»æ“ä½œï¼‰ï¼Œä¸”**å…æµå‡ºæµé‡è´¹**ã€‚
3.  **é«˜æ€§èƒ½**ï¼šåˆ©ç”¨ Cloudflare å…¨çƒè¾¹ç¼˜ç½‘ç»œï¼Œæ— è®ºèº«åœ¨ä½•å¤„ï¼Œè®¿é—®é€Ÿåº¦éƒ½æå¿«ã€‚
4.  **å¤§æ–‡ä»¶æ”¯æŒ**ï¼šé€šè¿‡é¢„ç­¾å URL æ–¹æ¡ˆï¼Œè½»æ¾å¤„ç† GB çº§åˆ«çš„å¤§æ–‡ä»¶ä¸Šä¼ ã€‚

## ğŸ› ï¸ éƒ¨ç½²ä¸é…ç½® (Deployment & Configuration)

### 1. å‡†å¤‡å·¥ä½œ
*   ä¸€ä¸ª Cloudflare è´¦å·ã€‚
*   ä¸€ä¸ª GitHub è´¦å·ã€‚

### 2. Cloudflare R2 é…ç½®
1.  åœ¨ Cloudflare Dashboard ä¸­åˆ›å»ºä¸€ä¸ª R2 å­˜å‚¨æ¡¶ã€‚
2.  **é…ç½® CORS**ï¼ˆ**å…³é”®æ­¥éª¤**ï¼Œå¦åˆ™æ— æ³•ä¸Šä¼ ï¼‰ï¼š
    è¿›å…¥å­˜å‚¨æ¡¶ -> **Settings** -> **CORS Policy**ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š
    ```json
    [
      {
        "AllowedOrigins": ["*"], // ç”Ÿäº§ç¯å¢ƒå»ºè®®ä¿®æ”¹ä¸ºä½ çš„å®é™…åŸŸå
        "AllowedMethods": ["PUT", "GET", "DELETE", "HEAD"],
        "AllowedHeaders": ["*"],
        "ExposeHeaders": ["ETag"],
        "MaxAgeSeconds": 3000
      }
    ]
    ```
3.  **ç»‘å®šè‡ªå®šä¹‰åŸŸå**ï¼ˆæ¨èï¼‰ï¼šåœ¨ **Settings** -> **Public Access** -> **Custom Domains** ä¸­ç»‘å®šä¸€ä¸ªåŸŸåï¼Œç”¨äºæ–‡ä»¶è®¿é—®ã€‚

### 3. éƒ¨ç½²åˆ° Cloudflare Pages
1.  Fork æœ¬ä»“åº“åˆ°ä½ çš„ GitHubã€‚
2.  åœ¨ Cloudflare Pages ä¸­åˆ›å»ºæ–°é¡¹ç›®ï¼Œè¿æ¥ä½ çš„ GitHub ä»“åº“ã€‚
3.  **æ„å»ºè®¾ç½® (Build settings)**ï¼š
    *   **Framework preset**: `Next.js`
    *   **Build command**: `npm run pages:build`
    *   **Build output directory**: `.vercel/output/static`
    *   **Compatibility flags**: æ·»åŠ  `nodejs_compat`
4.  **ç¯å¢ƒå˜é‡ (Environment variables)**ï¼š
    åœ¨ Pages é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š
    *   `R2_ACCOUNT_ID`: ä½ çš„ Cloudflare Account ID
    *   `R2_ACCESS_KEY_ID`: ä½ çš„ Access Key ID
    *   `R2_SECRET_ACCESS_KEY`: ä½ çš„ Secret Access Key
5.  **ç»‘å®š R2 å­˜å‚¨æ¡¶**ï¼š
    åœ¨ Pages é¡¹ç›®è®¾ç½® -> **Functions** -> **R2 Bucket Bindings** ä¸­ï¼š
    *   Variable name: `BUCKET` (**å¿…é¡»æ˜¯è¿™ä¸ªåå­—**)
    *   R2 Bucket: é€‰æ‹©ä½ åˆ›å»ºçš„å­˜å‚¨æ¡¶

### 4. ä¸ªæ€§åŒ–é…ç½®

ä¿®æ”¹ `src/app/page.tsx` æ–‡ä»¶ä¸­çš„é…ç½®ï¼š

```typescript
// ä¿®æ”¹ç®¡ç†å‘˜è´¦å·å¯†ç  (çº¦ 180 è¡Œ)
const handleLogin = () => {
  if (username === "admin" && password === "admin") { // ä¿®æ”¹è¿™é‡Œçš„è´¦å·å¯†ç 
    // ...
  }
}

// ä¿®æ”¹è‡ªå®šä¹‰åŸŸå (çº¦ 15 è¡Œ)
const getCustomUrl = (url?: string) => {
  // å°† https://r2cloud.qinghub.top æ›¿æ¢ä¸ºä½ è‡ªå·±çš„ R2 åŸŸå
  const urlObj = new URL(url.startsWith("http") ? url : `https://your-domain.com${url}`);
  // ...
}
```

## ğŸ¤ è‡´è°¢ (Credits)

*   æœ¬é¡¹ç›®ç”± **WanQing** å¼€å‘ä¸ç»´æŠ¤ã€‚
*   ç‰¹åˆ«æ„Ÿè°¢ **Gemini Code Assist** æä¾›å…¨ç¨‹ä»£ç è¾…åŠ©ã€æ¶æ„è®¾è®¡ä¸æŠ€æœ¯æ”¯æŒã€‚ğŸ¤–â¤ï¸

## ğŸ“„ å¼€æºåè®® (License)

MIT License
