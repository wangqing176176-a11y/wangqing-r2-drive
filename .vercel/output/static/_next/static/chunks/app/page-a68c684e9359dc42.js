(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{403:(e,r,t)=>{Promise.resolve().then(t.bind(t,9809))},9809:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(5155),l=t(2115);let s=e=>{if(!e)return"";try{return new URL(e.startsWith("http")?e:"https://r2cloud.qinghub.top".concat(e)).toString()}catch(r){if(e.startsWith("/"))return"https://r2cloud.qinghub.top".concat(e);return e}},n=e=>"folder"===e?(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-yellow-400",fill:"currentColor",children:(0,a.jsx)("path",{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"})}):e.startsWith("image/")?(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-purple-500",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"})}):e.startsWith("video/")?(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-rose-500",fill:"currentColor",children:(0,a.jsx)("path",{d:"M4.5 4.5a3 3 0 0 0-3 3v9a3 3 0 0 0 3 3h8.25a3 3 0 0 0 3-3v-9a3 3 0 0 0-3-3H4.5ZM19.94 18.75l-2.69-2.69V7.94l2.69-2.69c.944-.945 2.56-.276 2.56 1.06v11.38c0 1.336-1.616 2.005-2.56 1.06Z"})}):"application/pdf"===e?(0,a.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-red-500",fill:"currentColor",children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),(0,a.jsx)("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})]}):e.includes("word")||e.includes("document")?(0,a.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-blue-600",fill:"currentColor",children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),(0,a.jsx)("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}),(0,a.jsx)("text",{x:"8",y:"18",fontSize:"6",fill:"white",fontWeight:"bold",children:"W"})]}):e.includes("sheet")||e.includes("excel")?(0,a.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-green-600",fill:"currentColor",children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),(0,a.jsx)("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})]}):e.includes("presentation")||e.includes("powerpoint")?(0,a.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-orange-500",fill:"currentColor",children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),(0,a.jsx)("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})]}):e.includes("zip")||e.includes("compressed")||e.includes("tar")?(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-gray-500",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M6 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H6Zm1.5 1.5a.75.75 0 0 0-.75.75v1.5a.75.75 0 0 0 .75.75h1.5a.75.75 0 0 0 .75-.75v-1.5a.75.75 0 0 0-.75-.75h-1.5ZM6 9.75A.75.75 0 0 1 6.75 9h1.5a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1-.75-.75v-1.5Zm.75 3.75a.75.75 0 0 0-.75.75v1.5a.75.75 0 0 0 .75.75h1.5a.75.75 0 0 0 .75-.75v-1.5a.75.75 0 0 0-.75-.75h-1.5Z",clipRule:"evenodd"})}):(0,a.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-8 w-8 text-gray-400",fill:"currentColor",children:[(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),(0,a.jsx)("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})]}),i=e=>"folder"===e?{label:"文件夹",tone:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300"}:e.startsWith("image/")?{label:"图片",tone:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300"}:e.startsWith("video/")?{label:"视频",tone:"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-300"}:"application/pdf"===e?{label:"PDF",tone:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}:e.includes("word")||e.includes("document")?{label:"Word",tone:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}:e.includes("sheet")||e.includes("excel")?{label:"Excel",tone:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}:e.includes("presentation")||e.includes("powerpoint")?{label:"PPT",tone:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300"}:e.includes("zip")||e.includes("compressed")?{label:"压缩包",tone:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}:{label:"文件",tone:"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"},d=e=>null==e?"-":e>1048576?(e/1024/1024).toFixed(2)+" MB":e>1024?(e/1024).toFixed(2)+" KB":e+" B",o=e=>new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(e)),c=e=>{navigator.clipboard.writeText(e)},x=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=[];for(let l of e){var a;let e=[...r,l.name];t.push({item:l,parentPath:r,fullPath:e}),"folder"===l.type&&(null===(a=l.children)||void 0===a?void 0:a.length)&&t.push(...x(l.children,e))}return t},h=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})})},g=e=>{let{className:r}=e;return(0,a.jsx)("svg",{className:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,a.jsx)("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})})},u=()=>{let[e,r]=(0,l.useState)([]),[t,u]=(0,l.useState)([]),[m,p]=(0,l.useState)([]),[b,f]=(0,l.useState)(null),[v,y]=(0,l.useState)(null),[j,k]=(0,l.useState)(""),[w,N]=(0,l.useState)(null),M=(0,l.useRef)(null),C=async()=>{try{let e=await fetch("/api/files",{cache:"no-store"});if(!e.ok){let r=await e.text();throw Error("API请求失败: ".concat(e.status," ").concat(r.slice(0,100)))}let t=await e.json();if(!Array.isArray(t))throw Error("返回数据格式错误，应为数组");r(t)}catch(r){let e=r instanceof Error?r.message:String(r);N("加载失败: ".concat(e)),console.error(r)}};(0,l.useEffect)(()=>{C()},[]),(0,l.useEffect)(()=>{if(w){if(w.includes("失败")||w.includes("Error"))return;let e=setTimeout(()=>N(null),3e3);return()=>clearTimeout(e)}},[w]),(0,l.useEffect)(()=>{let r=e;for(let e of m){let t=r.find(r=>"folder"===r.type&&r.name===e);if(t&&t.children)r=t.children;else{r=[];break}}u(r)},[m,e]);let A=j.trim().toLowerCase(),Z=(0,l.useMemo)(()=>A?x(e).filter(e=>e.item.name.toLowerCase().includes(A)):null,[A,e]),H=(0,l.useMemo)(()=>Z||t.map(e=>({item:e,parentPath:m,fullPath:[...m,e.name]})),[t,m,Z]),L=e=>{c(e),y(e),N("链接已复制成功 ✅"),setTimeout(()=>y(null),2e3)},W=e=>{if("folder"!==e.type){if(!e.url){N("当前文件没有可访问的 URL，无法预览。请先配置真实的 R2 链接。");return}f(e)}},R=()=>f(null),B=e=>{p([...m,e.name])},V=e=>{p(m.slice(0,e+1))};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-950 text-gray-900 dark:text-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1 w-full mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[(0,a.jsxs)("nav",{className:"flex items-center text-sm font-medium text-gray-500 dark:text-gray-400 overflow-x-auto whitespace-nowrap pb-2 md:pb-0",children:[(0,a.jsxs)("button",{onClick:()=>p([]),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors flex items-center gap-1",children:[(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"根目录"]}),m.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("svg",{className:"h-5 w-5 text-gray-400 mx-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,a.jsx)("button",{onClick:()=>V(r),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors ".concat(r===m.length-1?"text-gray-900 dark:text-white font-semibold":""),children:e})]},r))]}),(0,a.jsxs)("div",{className:"relative w-full md:w-72",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsxs)("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("circle",{cx:"11",cy:"11",r:"7"}),(0,a.jsx)("path",{d:"M21 21l-4.2-4.2",strokeLinecap:"round"})]})}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>k(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg leading-5 bg-gray-50 dark:bg-gray-800/50 text-gray-900 dark:text-white placeholder-gray-500 focus:outline-none focus:bg-white dark:focus:bg-gray-800 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 sm:text-sm transition-all",placeholder:"搜索文件..."})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-800 overflow-hidden",children:[(0,a.jsxs)("div",{className:"hidden md:grid grid-cols-[minmax(0,3fr)_1fr_1fr_1.5fr] gap-4 px-6 py-3 bg-gray-50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-800 text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:[(0,a.jsx)("div",{children:"文件名"}),(0,a.jsx)("div",{children:"修改时间"}),(0,a.jsx)("div",{children:"大小"}),(0,a.jsx)("div",{className:"text-right",children:"操作"})]}),0===H.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("svg",{className:"h-16 w-16 mb-4 text-gray-300 dark:text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"暂无文件"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"当前目录下没有文件或文件夹"})]}):(0,a.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:H.map(e=>{let r=e.item,t=i(r.type),l="folder"===r.type,c=s(r.url);return(0,a.jsxs)("div",{className:"group flex items-center justify-between gap-3 px-4 py-3 md:grid md:grid-cols-[minmax(0,3fr)_1fr_1fr_1.5fr] md:gap-4 md:px-6 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors cursor-pointer border-b border-gray-100 dark:border-gray-800 last:border-0",onClick:()=>{if(Z&&l){p(e.fullPath),k("");return}l?B(r):W(r)},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:n(r.type)}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"truncate text-sm font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:r.name}),(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat(t.tone),children:t.label})]}),(0,a.jsxs)("div",{className:"mt-0.5 flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 md:hidden",children:[(0,a.jsx)("span",{children:o(r.lastModified)}),(0,a.jsx)("span",{className:"text-gray-300 dark:text-gray-700",children:"|"}),(0,a.jsx)("span",{children:d(r.size)})]})]})]}),(0,a.jsx)("div",{className:"hidden md:block text-sm text-gray-500 dark:text-gray-400",children:o(r.lastModified)}),(0,a.jsx)("div",{className:"hidden md:block text-sm text-gray-500 dark:text-gray-400",children:d(r.size)}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 flex-shrink-0",onClick:e=>e.stopPropagation(),children:["folder"!==r.type&&c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 ".concat(v===c?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400 border border-transparent scale-105":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:border-blue-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:border-blue-500 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 hover:shadow-sm"),onClick:()=>L(c),title:"复制直链",children:[(0,a.jsx)(h,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"复制直链"})]}),(0,a.jsxs)("a",{href:c,download:!0,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-500 transition-all duration-200 shadow-sm hover:shadow-md active:scale-95",onClick:()=>N("正在拉起下载... \uD83D\uDE80"),title:"下载",children:[(0,a.jsx)(g,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"下载"})]})]}),"folder"===r.type&&(0,a.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},"".concat(e.fullPath.join("/"),":").concat(r.type))})})]}),(0,a.jsx)("footer",{className:"mt-auto py-6 border-t border-gray-200 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,a.jsxs)("span",{children:["\xa9 ",new Date().getFullYear()," WanQing's R2 Drive."]}),(0,a.jsx)("div",{className:"hidden md:block w-px h-4 bg-gray-300 dark:bg-gray-700"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:"Designed by"}),(0,a.jsx)("a",{href:"https://qinghub.top",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"WanQing"})]}),(0,a.jsx)("div",{className:"hidden md:block w-px h-4 bg-gray-300 dark:bg-gray-700"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:"Assisted by"}),(0,a.jsx)("span",{className:"font-medium text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600",children:"Gemini AI"})]}),(0,a.jsx)("div",{className:"hidden md:block w-px h-4 bg-gray-300 dark:bg-gray-700"}),(0,a.jsx)("a",{href:"https://github.com/wangqing176176-a11y",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"GitHub",children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})})]})})]}),b&&(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",onClick:R,children:(0,a.jsxs)("div",{className:"relative w-full max-w-6xl h-[90vh] flex flex-col bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 z-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white truncate max-w-md",children:b.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o(b.lastModified)," \xb7 ",d(b.size)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s(b.url)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-800 border border-transparent hover:border-blue-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:border-blue-500 dark:hover:text-blue-400 dark:hover:bg-blue-900/20 transition-all duration-200",onClick:()=>L(s(b.url)),children:[(0,a.jsx)(h,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"复制直链"})]}),(0,a.jsxs)("a",{href:s(b.url),download:!0,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 shadow-sm hover:shadow-md active:scale-95",onClick:()=>N("正在拉起下载... \uD83D\uDE80"),children:[(0,a.jsx)(g,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"下载"})]})]}),(0,a.jsx)("button",{className:"ml-2 p-2 rounded-full text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",onClick:R,children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto bg-gray-100 dark:bg-black flex items-center justify-center p-4",children:[b.type.startsWith("image/")&&(0,a.jsx)("img",{src:s(b.url)||"",alt:b.name,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg"}),b.type.startsWith("video/")&&(0,a.jsx)("video",{src:s(b.url)||"",controls:!0,className:"w-full max-w-5xl max-h-full rounded-lg shadow-2xl bg-black"}),("application/pdf"===b.type||b.type.includes("word")||b.type.includes("document")||b.type.includes("sheet")||b.type.includes("excel")||b.type.includes("presentation")||b.type.includes("powerpoint"))&&(0,a.jsx)("iframe",{src:"https://view.officeapps.live.com/op/view.aspx?src=".concat(encodeURIComponent(s(b.url)||"")),className:"w-full h-full bg-white",title:"Office Preview"}),!b.type.startsWith("image/")&&!b.type.startsWith("video/")&&"application/pdf"!==b.type&&!b.type.includes("word")&&!b.type.includes("document")&&!b.type.includes("sheet")&&!b.type.includes("excel")&&!b.type.includes("presentation")&&!b.type.includes("powerpoint")&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center text-center p-8",children:[(0,a.jsx)("div",{className:"h-24 w-24 bg-gray-200 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:n(b.type)}),(0,a.jsx)("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"无法预览此文件"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"此文件类型暂不支持在线预览，请下载后查看。"}),(0,a.jsxs)("a",{href:s(b.url),download:!0,className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-base font-medium text-white bg-blue-600 hover:bg-blue-700 transition-all duration-200 shadow-sm hover:shadow-md active:scale-95",onClick:()=>N("正在拉起下载... \uD83D\uDE80"),children:[(0,a.jsx)(g,{className:"h-5 w-5"}),"下载文件"]})]})]})]})}),w&&(0,a.jsx)("div",{className:"fixed bottom-6 right-6 z-50 max-w-sm w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 animate-fade-in-up",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:w}),(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",onClick:()=>N(null),children:(0,a.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsx)("input",{ref:M,type:"file",multiple:!0,className:"hidden",onChange:e=>{let r=e.target.files;r&&0!==r.length&&(N("当前项目尚未配置 R2 上传接口。请先配置后端签名/分片上传流程。"),e.target.value="")}})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[441,517,358],()=>r(403)),_N_E=e.O()}]);